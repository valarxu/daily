# 项目更新指南

本项目使用 Docker Compose 进行容器化部署。在修改代码或获取最新代码后，请按照以下步骤更新运行中的服务。

## 🚀 快速更新

在项目根目录下（即包含 `docker-compose.yml` 的目录），打开终端执行以下命令：

```bash
docker-compose up -d --build
```

**命令说明：**
*   `up`: 启动服务。
*   `-d`: 后台运行 (Detached mode)。
*   `--build`: **关键参数**。强制根据最新的代码重新构建 Docker 镜像。如果不加此参数，Docker 可能会使用旧的缓存镜像，导致代码修改不生效。

执行完毕后，访问以下地址查看更新效果：
*   前端页面: http://localhost:3005
*   后端接口: http://localhost:3006

---

## 🛠 常用维护命令

### 1. 查看服务日志
如果更新后服务无法启动或运行异常，可以通过日志排查问题：

```bash
# 查看所有服务的实时日志
docker-compose logs -f

# 仅查看后端日志
docker-compose logs -f backend

# 仅查看前端日志
docker-compose logs -f frontend
```
*(按 `Ctrl + C` 退出日志查看)*

### 2. 停止服务
如果需要完全停止所有服务：

```bash
docker-compose down
```

### 3. 重启服务
如果不涉及镜像构建（例如只修改了环境变量配置），可以直接重启：

```bash
docker-compose restart
```

## ⚠️ 注意事项

1.  **数据持久化**：
    *   MongoDB 的数据存储在 Docker Volume `mongo_data` 中。
    *   执行 `docker-compose down` 或重新构建镜像**不会**导致数据库数据丢失。
    *   **警告**：如果执行了 `docker-compose down -v` (带 `-v` 参数)，将会删除数据卷，导致**数据丢失**。请谨慎使用。

2.  **端口冲突**：
    *   默认占用端口：`3005` (前端), `3006` (后端), `27018` (数据库)。
    *   如果启动失败提示端口被占用，请检查是否有其他服务占用了这些端口，或在 `docker-compose.yml` 中修改映射端口。
